{% set data = load_data(path=data_path) %}
{% for entry in data.entries %}
{%- if entry._incomplete -%}{% continue %}{%- endif -%}
{% if entry.type == 'book' or entry.type == 'post' %}

## "[{{entry.title}}]({{entry.url}})" by {{entry.author}}

({% if entry.pages %}~{{entry.pages}} pages; {% endif %}
[archived](https://web.archive.org/web/{{entry.archive}}/{{entry.url}}))

{% if entry.summary %}
{{ entry.summary }}
{% endif %}

{% if entry.niches %}
Niches: {{entry.niches | join(sep="; ") }}
{% endif %}

{% if entry.updated %}
Last update I saw: {{ entry.updated | date(format="%Y-%m-%d") }}
{% endif %}

{% elif entry.type == 'series' %}

## "{{entry.title}}" by {{entry.author}}

{% if entry.summary %}
{{entry.summary}}
{% endif -%}

{% if entry.niches %}Niches: {{entry.niches | join(sep="; ") }}{% endif %}

{% if entry.updated %}Last update I saw: {{ entry.updated | date(format="%Y-%m-%d") }}{% endif %}

{% for part in entry.parts %}
1. [{{part.title}}]({{part.url}}) ([archived](https://web.archive.org/web/{{part.archive}}/{{part.url}})){% if part.summary %}

    {{part.summary}}{% endif %}
{% endfor %}

{% else %}
<!-- Pascal screwed up. There is no way to handle type `{{entry.type}}` -->
{% endif %}
{% endfor %}
